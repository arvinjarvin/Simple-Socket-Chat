(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{60:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),r=n.n(c),s=n(52),o=n.n(s),i=(n(60),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,96)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))}),l=n(2),u=n(16);function j(){return Object(a.jsx)("nav",{className:"app-navbar navbar navbar-transparent navbar-expand-lg navbar-light shadow p-2",children:Object(a.jsxs)("div",{className:"container pt-2",children:[Object(a.jsx)("div",{className:"navbar-brand",children:Object(a.jsx)(u.b,{to:"/",children:Object(a.jsx)("h4",{className:"text-white",children:"Socket.io"})})}),Object(a.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navContent","aria-controls":"navContent","aria-expanded":"false","aria-label":"Nav",children:Object(a.jsx)("span",{className:"navbar-toggler-icon"})}),Object(a.jsx)("div",{className:"collapse navbar-collapse",id:"navContent",children:Object(a.jsx)("div",{className:"navbar-nav mr-auto"})})]})})}function d(){return Object(a.jsx)("header",{className:"mb-4",children:Object(a.jsx)(j,{})})}function b(e){var t=e.location;return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("h2",{children:"Error!"}),Object(a.jsx)("hr",{}),Object(a.jsx)("h4",{children:"Sorry, we can't find what you're looking for!"}),Object(a.jsxs)("p",{children:['At path "',t.pathname,'"']})]})}var h=n(34),m=n(11),g=n(54),f=n.n(g);function x(e){var t=e.data,n=Object(c.useState)(""),r=Object(m.a)(n,2);r[0],r[1];return Object(a.jsxs)("div",{className:"d-flex flex-row message",children:[Object(a.jsx)("div",{className:"mr-3",children:Object(a.jsx)("div",{style:{backgroundColor:"grey",width:"50px",height:"50px",borderRadius:50,fontSize:20,userSelect:"none",cursor:"pointer"},className:"d-flex justify-content-center align-items-center text-white",children:t.username.substr(0,2).toUpperCase()})}),Object(a.jsxs)("div",{className:"d-flex flex-column",children:[Object(a.jsxs)("div",{className:"d-flex flex-row",children:[Object(a.jsx)("small",{className:"font-weight-bold",children:t.username}),"\xa0",Object(a.jsx)("small",{children:function(e){var t=new Date,n=new Date(e);return n.getDate()===t.getDate()&&n.getMonth()===t.getMonth()&&n.getFullYear()===t.getFullYear()?"Today at ".concat(n.toLocaleTimeString()):n.getDate()===t.getDate()-1&&n.getMonth()===t.getMonth()&&n.getFullYear()===t.getFullYear()?"Yesterday at ".concat(n.toLocaleTimeString()):"".concat(n.toLocaleDateString())}(t.date)})]}),Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:t.message})})]})]})}function p(){var e,t=Object(c.useState)([]),n=Object(m.a)(t,2),r=n[0],s=n[1],o=Object(c.useState)(""),i=Object(m.a)(o,2),l=i[0],u=i[1],j=Object(c.useState)(""),d=Object(m.a)(j,2),b=d[0],g=d[1],p=Object(c.useState)([]),O=Object(m.a)(p,2),v=(O[0],O[1]),y=Object(c.useState)([]),N=Object(m.a)(y,2),w=N[0],S=N[1],D=Object(c.useState)(!1),C=Object(m.a)(D,2),F=C[0],T=C[1],k=Object(c.useRef)();Object(c.useEffect)((function(){var e=M();return g(e),k.current=f()("https://simple-socket-io.herokuapp.com",{query:{username:e}}),k.current.on("chat",(function(e){s((function(t){return[e].concat(Object(h.a)(t))}))})),k.current.on("users",(function(e){v(e)})),k.current.on("typing",(function(e){w.filter((function(t){return t.username===e.username})).length>0||(console.log("".concat(e.username," started typing.")),S((function(t){return[].concat(Object(h.a)(t),[e])})))})),k.current.on("stopped_typing",(function(e){console.log("".concat(e.username," stopped typing.")),S(w.filter((function(t){return t.username!==e.username})))})),function(){k.current.disconnect()}}),[]);var M=function(){for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNQRSTUVWXYZ12345790",t="",n=0;n<10;n++)""===t?t=e[Math.floor(Math.random()*e.length)]:t+=e[Math.floor(Math.random()*e.length)];return t};return Object(a.jsxs)("div",{className:"container d-flex flex-column",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{style:{height:"75vh",overflowY:"scroll"},className:"d-flex flex-column-reverse",children:r.map((function(e){return Object(a.jsx)(x,{data:e},e.id)}))}),Object(a.jsx)("form",{onSubmit:function(e){e.preventDefault(),k.current.emit("chat",{message:l,username:b}),u("")},style:{width:"100%",height:70},className:"form-control d-flex align-items-center",children:Object(a.jsx)("input",{className:"p-3",type:"text",onChange:function(e){u(e.target.value)},placeholder:"Type message and hit enter to send",value:l,onKeyDown:function(){clearTimeout(e),F||(T(!0),k.current.emit("typing"))},onKeyUp:function(){clearTimeout(e),e=setTimeout((function(){k.current.emit("stopped_typing"),T(!1)}),5e3)},id:"msg",style:{width:"100%",height:40}})})]}),w.length>0?Object(a.jsx)("div",{children:Object(a.jsx)("small",{className:"font-weight-bold",children:w.length>3?"Several users are typing.":w.length>1?"".concat(w.map((function(e){return e.username})).join(" and ")," are typing."):"".concat(w.map((function(e){return e.username}))," is typing.")})}):""]})}function O(){return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)(d,{}),Object(a.jsxs)(l.c,{children:[Object(a.jsx)(l.a,{exact:!0,path:"/",component:p}),Object(a.jsx)(l.a,{component:b})]})]})}o.a.render(Object(a.jsx)(u.a,{basename:/github.io/.test(window.location)?"/simple-socket-chat":"/",children:Object(a.jsx)(O,{})}),document.getElementById("root")),i()}},[[95,1,2]]]);
//# sourceMappingURL=main.f132ca77.chunk.js.map